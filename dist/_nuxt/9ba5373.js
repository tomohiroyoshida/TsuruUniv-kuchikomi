(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{196:function(t,e,r){"use strict";r(45),r(53),r(59);var n=r(20),o=r(38),c=r(65);e.a=Object(o.defineNuxtPlugin)(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.store,n=[],r.getters.classes===[]){t.next=5;break}return t.next=5,c.a.collection("classes").orderBy("classTitle","asc").get().then((function(t){t.forEach((function(t){n.push(t.data())}))}));case 5:r.dispatch("setClasses",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},197:function(t,e,r){"use strict";r(45),r(53),r(59);var n=r(20),o=r(38),c=r(65);e.a=Object(o.defineNuxtPlugin)(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.store,n=[],r.getters.users===[]){t.next=5;break}return t.next=5,c.a.collection("users").get().then((function(t){t.forEach((function(t){return n.push(t.data())}))}));case 5:r.dispatch("setUsers",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},238:function(t,e,r){var content=r(305);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(18).default)("0e28e669",content,!0,{sourceMap:!1})},245:function(t,e,r){var content=r(339);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(18).default)("6d4685ca",content,!0,{sourceMap:!1})},255:function(t,e,r){"use strict";var n=r(38),o=r(68),c=Object(n.defineComponent)({name:"default",setup:function(t,e){var r=e.root,c=Object(n.ref)();c.value=window.innerWidth;return{width:c,loggedinUser:Object(n.computed)((function(){return r.$store.getters.user})),loggedIn:Object(n.computed)((function(){return r.$store.getters.user.loggedIn})),signOut:function(){o.a.auth().signOut().then((function(){r.$store.dispatch("setUser",{uid:"",username:"",photoURL:""})})).catch((function(t){console.error(t)}))},toProfile:function(){r.$router.push("/edit-profile")}}}}),l=(r(338),r(87)),f=r(128),v=r.n(f),d=r(385),m=r(389),h=r(386),_=r(376),x=r(189),C=r(190),k=r(119),w=r(193),y=r(118),U=r(378),O=r(388),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{attrs:{id:"default"}},[r("v-app-bar",{attrs:{app:"",flat:"","extension-height":"60",color:"grey lighten-5"}},[t.width>700?r("div",{staticClass:"text-subtitle-1 font-weight-bold"},[t._v("\n      つるコミ\n    ")]):t._e(),t._v(" "),r("v-btn",{staticClass:"mx-1",attrs:{text:"",small:t.width<700,color:"primary",exact:"",link:"",to:"/"}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-home-outline")]),t._v(" "),r("div",[t._v("ホーム")])],1),t._v(" "),r("v-divider",{staticClass:"py-2",attrs:{vertical:""}}),t._v(" "),r("v-btn",{staticClass:"mx-1",attrs:{text:"",small:t.width<700,color:"primary",exact:"",link:"",to:"/search"}},[r("v-icon",{attrs:{small:""}},[t._v("mdi-magnify")]),t._v(" "),r("div",[t._v("検索")])],1),t._v(" "),r("v-divider",{staticClass:"py-2",attrs:{vertical:""}}),t._v(" "),r("v-btn",{staticClass:"mx-1",attrs:{text:"",small:t.width<700,color:"primary",exact:"",link:"",to:"/create"}},[r("v-icon",{attrs:{small:""}},[t._v(" mdi-pencil-plus-outline ")]),t._v(" "),r("div",[t._v("作成")])],1),t._v(" "),r("v-spacer"),t._v(" "),t.loggedinUser.uid?r("v-menu",{attrs:{"open-on-hover":"",bottom:"","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,o=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"pa-1 mr-1",attrs:{text:"",icon:"",color:"primary","x-large":""}},"v-btn",o,!1),n),[r("v-icon",{attrs:{color:"primary",size:"60"}},[t._v(" mdi-account-circle ")])],1)]}}])},[t._v(" "),r("v-list",[r("v-list-item-group",{attrs:{color:"grey darken-1"}},[r("v-list-item",{attrs:{"two-line":""},on:{click:t.toProfile}},[r("v-list-item-title",[r("v-icon",[t._v("mdi-account-cog-outline")]),t._v("\n              プロフィール設定\n            ")],1)],1),t._v(" "),r("v-divider"),t._v(" "),r("v-list-item",{attrs:{"two-line":""},on:{click:t.signOut}},[r("v-list-item-title",[r("v-icon",[t._v("mdi-logout")]),t._v("\n              ログアウト\n            ")],1)],1)],1)],1)],1):r("v-btn",{attrs:{small:t.width<700,depressed:"",to:"/login",color:"primary"}},[t._v("\n      ログイン\n    ")])],1),t._v(" "),r("nuxt")],1)}),[],!1,null,"7ca6c7c9",null);e.a=component.exports;v()(component,{VApp:d.a,VAppBar:m.a,VBtn:h.a,VDivider:_.a,VIcon:x.a,VList:C.a,VListItem:k.a,VListItemGroup:w.a,VListItemTitle:y.b,VMenu:U.a,VSpacer:O.a})},261:function(t,e,r){r(262),t.exports=r(263)},273:function(t,e,r){"use strict";r.r(e);r(44),r(46),r(59);var n=r(20),o=r(38),c=r(68),l=r(65);e.default=Object(o.defineNuxtMiddleware)((function(t){var e=t.store,r=t.route,o=t.redirect,f=["index","terms","privacy","login"];c.a.auth().onAuthStateChanged(function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(n){var c,v,d,m,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=8;break}return c=l.a.collection("users").doc(n.uid),t.next=4,c.get().then((function(t){return t.data()}));case 4:(v=t.sent)?(d={uid:n.uid,username:v.username?v.username:n.displayName||"名無しのユーザー",photoURL:v.photoURL},e.dispatch("setUser",d),c.set(d)):(m={uid:n.uid,username:n.displayName||"名無しのユーザー",photoURL:n.photoURL||"https://storage.googleapis.com/studio-cms-assets/projects/RQqJDxPBWg/s-1000x1000_v-fs_webp_eb270a46-5d4c-484e-ada2-a42a7f45f182.webp"},e.dispatch("setUser",m),c.set(m)),t.next=10;break;case 8:(h=r.name)&&(f.includes(h)||o("/login"));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),c.a.auth().setPersistence(c.a.auth.Auth.Persistence.SESSION)}))},304:function(t,e,r){"use strict";r(238)},305:function(t,e,r){(e=r(17)(!1)).push([t.i,"h1[data-v-76f02efc]{font-size:20px}.card[data-v-76f02efc]{margin:auto 10px}.img[data-v-76f02efc]{position:relative}.name[data-v-76f02efc]{position:absolute;right:30%;bottom:20px}",""]),t.exports=e},338:function(t,e,r){"use strict";r(245)},339:function(t,e,r){(e=r(17)(!1)).push([t.i,".image[data-v-7ca6c7c9]{border-radius:50%;width:100px;height:100px}",""]),t.exports=e},367:function(t,e,r){"use strict";r.r(e),r.d(e,"state",(function(){return n})),r.d(e,"getters",(function(){return o})),r.d(e,"mutations",(function(){return c})),r.d(e,"actions",(function(){return l}));var n=function(){return{user:{uid:"",username:"",photoURL:""},csrfToken:"",users:[],classes:[],searchingTitle:"",filteredClasses:[]}},o={user:function(t){return t.user},users:function(t){return t.users},classes:function(t){return t.classes},searchingTitle:function(t){return t.searchingTitle},filteredClasses:function(t){return t.filteredClasses},csrfToken:function(t){return t.csrfToken}},c={setUser:function(t,e){t.user=e},setUsers:function(t,e){t.users=e},setClasses:function(t,e){t.classes=e},pushClass:function(t,e){t.classes.push(e)},setSearchingTitle:function(t,e){t.searchingTitle=e},setFilteredClasses:function(t,e){t.filteredClasses=e},setCsrfToken:function(t,e){t.csrfToken=e}},l={setUser:function(t,e){(0,t.commit)("setUser",e)},setUsers:function(t,e){(0,t.commit)("setUsers",e)},setClasses:function(t,e){(0,t.commit)("setClasses",e)},pushClass:function(t,e){(0,t.commit)("pushClass",e)},setSearchingTitle:function(t,e){(0,t.commit)("setSearchingTitle",e)},setFilteredClasses:function(t,e){(0,t.commit)("setFilteredClasses",e)},setCsrfToken:function(t,e){(0,t.commit)("setCsrfToken",e)}}},65:function(t,e,r){"use strict";var n=r(68);n.a.initializeApp({apiKey:"AIzaSyCblJn0FhB0ofOY7wNRLMCOSsFKUruLtgs",authDomain:"tsuruuniv-kuchikomi.firebaseapp.com",databaseURL:"https://tsuruuniv-kuchikomi.firebaseio.com",projectId:"tsuruuniv-kuchikomi"});var o=n.a.firestore();e.a=o},77:function(t,e,r){"use strict";var n={layout:"error",props:{error:{type:Object,default:null}},head:function(){return{title:404===this.error.statusCode?this.pageNotFound:this.otherError}}},o=(r(304),r(87)),c=r(128),l=r.n(c),f=r(385),v=r(375),d=r(256),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[404===t.error.statusCode?r("h1",{staticClass:"mt-14"},[r("v-card",{staticClass:"px-4 py-8 text-center",attrs:{outlined:"",color:"#F5F5F5",height:"200",rounded:"30"}},[r("div",{staticClass:"mb-3"},[t._v("お探しのページが見つかりません。")]),t._v(" "),r("div",{staticClass:"text-subtitle-1 mb-3"},[t._v("URLが正しいか確認してください。")]),t._v(" "),r("NuxtLink",{staticClass:"text-subtitle-1",attrs:{to:"/"}},[t._v(" ホーム画面へ戻る")])],1),t._v(" "),r("v-img",{attrs:{contain:"","max-height":"500",src:"/cat_PC.webp"}}),t._v(" "),r("div",{staticClass:"text-caption text-center"},[t._v("\n      illustrated by\n      "),r("a",{staticClass:"ml-1",attrs:{href:"https://shigureni.com/",target:"_blank"}},[t._v("shigureni")])])],1):r("h1",{staticClass:"mt-14"},[r("v-card",{staticClass:"px-4 py-8 text-center",attrs:{outlined:"",color:"#F5F5F5",height:"200",rounded:"30"}},[r("div",{staticClass:"mb-3"},[t._v("エラーが発生しました。")]),t._v(" "),r("div",{staticClass:"text-subtitle-1 mb-3"},[t._v("ページをリロードしてください。")]),t._v(" "),r("NuxtLink",{staticClass:"text-h6",attrs:{to:"/"}},[t._v(" ホーム画面へ戻る")])],1),t._v(" "),r("v-img",{attrs:{contain:"","max-height":"500",src:"/cat_PC.webp"}}),t._v(" "),r("div",{staticClass:"text-caption text-center"},[t._v("\n      illustrated by\n      "),r("a",{staticClass:"ml-1",attrs:{href:"https://shigureni.com/",target:"_blank"}},[t._v("shigureni")])])],1)])}),[],!1,null,"76f02efc",null);e.a=component.exports;l()(component,{VApp:f.a,VCard:v.a,VImg:d.a})}},[[261,15,5,16]]]);